{"componentChunkName":"component---src-templates-post-js","path":"/post/javascript-promises/","webpackCompilationHash":"38106d00426f1294c5cc","result":{"data":{"markdownRemark":{"html":"<p>Promises can cause a lot of confusion for newbies, just like it did to me when I first encountered them. Their names may not be the most descriptive but let's get over that. </p>\n<h1>Definition</h1>\n<p>A promise is an asynchronous object that has three states: </p>\n<ol>\n<li>pending</li>\n<li>fulfilled</li>\n<li>rejected</li>\n</ol>\n<p>Each of these states represent a condition that the promise takes. It'll take on <em>pending</em> if it's neither fulfilled nor rejected, will take <em>fulfilled</em> when a positive value has been returned or <em>rejected</em> when an error occurred. </p>\n<p>Let's think of promises as messenger pigeons: you tie a message to their feet and send them to their destination. This is the <em>pending</em> state in which the asynchronous code has been started on another thread and your program continues normally just like you would continue your chores after sending the pigeon. </p>\n<p>Then the pigeon arrives with a response message tied to its feet, if that message is positive or allowing you to do something then it's purpose has been <em>fulfilled</em> and you can easily <em>then</em> handle the <em>resolved</em> (returned) message. If the message is negative though, then it's purpose is not fulfilled but rather <em>rejected</em> in which case there will be some kind of error that you will have to <em>catch</em> and handle. </p>\n<h1>Example code</h1>\n<p>Consider the following snippet</p>\n<pre><code class=\"language-Javascript\">new Promise((resolve, reject)=>{\n    setTimeout(()=>reject(\"Pigeon message: We're no go!\"), 2000)\n})\n  .then(resolved=>console.log(\"Pigeon has come back!\", resolved))\n  .catch(rejection=>console.log(rejection))\n\nconsole.log('Do your daily chores')\n\n|-> \"Do your daily chores\"\n|-> \"Pigeon message: We're no go!\"\n</code></pre>\n<p>The daily chores string got logged before the rejection message because the rejection message is <em>asynchronous</em>, meaning that while it happens code after it can run normally. In that case the <em>catch</em> statement worked because a rejection means error that needs to be caught as I said previously. </p>\n<p>Now consider the following instead:  </p>\n<pre><code class=\"language-javascript\">new Promise((resolve, reject)=>{\n    setTimeout(()=>resolve(\"Pigeon message: We're good to go!\"), 2000)\n})\n  .then(resolved=>console.log(\"Pigeon has come back!\", resolved))\n  .catch(rejection=>console.log(rejection))\n\nconsole.log('Do your daily chores')\n\n|-> \"Do your daily chores\"\n|-> \"Pigeon has come back! Pigeon message: We're good to go!\"\n</code></pre>\n<p>This one worked and got <em>fulfilled</em> with the resolved message \"We're good to go!\". </p>\n<p>What if we don't use <code>then</code> and <code>catch</code> at all?</p>\n<h1>Rejection without <code>catch</code></h1>\n<pre><code class=\"language-js\">let pro = new Promise((resolve, reject)=>{\n    setTimeout(()=>reject(\"Pigeon message: We're no go!\"), 2000)\n})\nconsole.log('Do your daily chores')\n\n|-> \"Do your daily chores\"\n|-> \"Unhandled promise rejection Pigeon message: We're no go!\"\n</code></pre>\n<p>In case of a rejection without a catch block the browser will throw an <code>Unhandled promise rejection</code> error. If you're developing on a <em>NodeJS</em> environment then you really <strong>should</strong> use a <code>catch</code> block because NodeJS will throw an the same error with a deprecation warning telling you that in future releases of NodeJS the whole process will be stopped with exit code that's not <code>0</code>, which could be problematic if you're working on a web server.</p>\n<h1>TL;DR</h1>\n<p>Promises are messenger pigeons, send them with a message (request) in which it'll be <code>pending</code> while you do your chores (async code doesn't block the main thread) and when it comes back the response will either be a <code>rejection</code> error for you to <code>catch</code> or a <code>fulfilled</code> request which you handle with <code>then</code></p>\n<p>If you liked this article make sure to share it with your friends, and if you have any questions or spotted a mistake tweet it to me <a href=\"https://twitter.com/Nabil_Tharwat16\">@Nabil_Tharwat16</a>, and as always, stay safe!</p>","frontmatter":{"date":"July 15, 2019","path":"/post/javascript-promises/","title":"JavaScript Promises","description":"JavaScript Promises is one of the most difficult objects to understand. I'll explain them in an easy manner.","author":"Nabil Tharwat","length":460,"lang":"en","ogImageName":"Promises","ogImageExtension":"png","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqElEQVQ4y4WTy07CUBCGCy0XiQFNUOKT+gDyAOiWGGM0bkzUjUZNNF4WJIiixghSLi2FQsC4UgKU8junBVJoC4s/c87p9Dszc2Y41DhYNVRMWdeOYv4W37E4J6DVumoMrc0BzsJ0sv2Kh0S27EGPxKwm2bOZAs6macCqBCl6MSgI6Bd46GQ1stoX7UuexcCJHTn1SyZMFwUMijy6RQEdAnZFM2Lmoyv2SO0p10kNkkxRyF70RR7yUxBKZgmdkh9Q6bxJ31umn2uELEW0OTyeLeNkdwW5mxDE2xBy9yGkL8LIXkWQvQ6jnArh8y6I/EMAzVdhAp2KkG0GDPjN4fwgguPkCk6TqzhMRJHYitEFUewl1rATj2F/O4r45gat13F5FDYiZcHYgOMD9pJQOfzmeaipIOoZH/5EP34+/Gi8+FF/9kFJB9B+F9B6Ewzf+TWsmf2ly7Qu08NQLfUq/ajw9N1j1NjwUxfUcLZtWL91C/QoEr2q5KMLCEhgrSIYfeg0UY4RWoED2axPr0JgkiaZYmVxmyjXSRnW7POsj+SU0cJZdhp8V1+L/gFRkhjmWnqRdQAAAABJRU5ErkJggg==","aspectRatio":1.40625,"src":"/blog/static/2b8e9fd9a449e52c05af784694bd64ce/4ca57/Promises.png","srcSet":"/blog/static/2b8e9fd9a449e52c05af784694bd64ce/9bad7/Promises.png 197w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/8c7c3/Promises.png 393w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/4ca57/Promises.png 786w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/3ba8f/Promises.png 1179w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/2513a/Promises.png 1440w","srcWebp":"/blog/static/2b8e9fd9a449e52c05af784694bd64ce/6baea/Promises.webp","srcSetWebp":"/blog/static/2b8e9fd9a449e52c05af784694bd64ce/de90f/Promises.webp 197w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/8a853/Promises.webp 393w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/6baea/Promises.webp 786w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/58d49/Promises.webp 1179w,\n/blog/static/2b8e9fd9a449e52c05af784694bd64ce/cb595/Promises.webp 1440w","sizes":"(max-width: 786px) 100vw, 786px"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}