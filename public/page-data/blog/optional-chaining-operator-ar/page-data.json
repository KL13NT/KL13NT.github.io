{"componentChunkName":"component---src-templates-post-js","path":"/blog/optional-chaining-operator-ar/","result":{"data":{"markdownRemark":{"html":"<p>عمرك حاولت تجيب قيمة من اعماق اوبجكت بس اتفاجئت ان الكود بيديلك ايرور بسبب ان قيمة في النص بتطلع Undefined؟ متقلقش تاني, في المقالة دي هنتعلم ازاي منقعش في الغلط ده باستخدام الـ optional chaining operator. قبل ما نخش في شرحة عايزين نشرح يعني ايه chaining اصلاً و ازاي بيتعمل في الجافاسكربت.</p>\n<h2>Chaining | التسلسل</h2>\n<p>تخيل معايا ان معانا <code>Object</code> جواه <code>Object</code> جواه <code>Object</code>. يعني 3 مستويات من العمق. احنا عايزين نجيب القيمة اللي اسمها <code>value</code> من جوا اعمق اوبجكت من دول. الحل الطبيعي ان عندنا طريقتين</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">const obj = {\n  foo: {\n    bar: {\n      value: 42,\n    },\n  },\n};\n\nconst value = obj.foo.bar.value;\n</code></pre>\n</div>\n<p>طيب ولنفرض دلوقتي ان <code>foo</code> مش موجود اصلاً. اللي هيحصل ان البرنامج هيعمل ايرور و هيقفل في وشنا, و احنا طبعاً مش عايزين حاجه زي دي تحصل لما الكود يبقى شغال على جهاز المستخدم في الـ<code>production</code>. طيب ايه الحل؟ الحل حالياً اننا نعمل if كتير عشان نتأكد ان كل عنصر من دول موجود:</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">const obj = {\n  foo: {\n    bar: {\n      value: '',\n    },\n  },\n};\n\nconst length =\n  (obj\n      ? (obj.foo\n        ? (obj.foo.bar\n          ? (obj.foo.bar.value\n            ? obj.foo.bar.value.length\n            : undefined)\n          : undefined)\n        : undefined)\n      : undefined);\n\nاو عن طريق ال if العادية\n\nlet value;\n\nif(obj &#x26;&#x26; obj.foo &#x26;&#x26; obj.foo.bar &#x26;&#x26; obj.foo.bar.value)\n  value = obj.foo.bar.value.length;\n</code></pre>\n</div>\n<p>طيب ماشي احنا كده اتأكدنا اذا كانت القيمة موجودة اصلاً ولا لا. بس في مشكلة كمان: احنا دلوقتي بنجيب طول <code>string</code> اللي هي <code>value</code>. طيب لو طولها اصلاً ب <code>0</code>؟ هيحصل مشكلة ان جافاسكربت هتحول القيمة الصفرية السالبة دي الى <code>false</code> و بالتالي حتى مع وجود القيمة هيفضل دايماً شرط ال<code>if</code> ميتحققش لان كده هيرجعله <code>false</code> من <code>obj.foo.bar.value</code> اللي هتكون قيمتها ب <code>''</code> و بتتحول ل <code>false</code>. وبالتالي لازم نعمل مثلاً فنكشن تتأكد اذا كان المتغير ده <code>string</code> او لا و طولها و هكذا. او ع الاقل الشرط هيبقى معقد اكتر و احنا مش عايزين كده. طريق نعمل ايه؟</p>\n<h2>ECMAScript TC39 Proposals | اقتراحات لجنة تطوير ايكماسكربت</h2>\n<p>جافاسكربت اللي موجودة في المتصفحات مش بتبقى لوحدها كده و كل متصفح بيعمل اللي عايزه, لا. جافاسكربت نفسها عبارة عن تطبيق عملي ل<code>standard</code> معروف باسم <code>ECMAScript</code> و ده اللي بيتحكم في اللغه و تطويرها. المتحكم في ال <code>standard</code> ده هي منظمة <code>Ecma International</code> و اللي بدورها بتقوم بحماية و تطوير لغات كتيرة تانية. ايكماسكربت معروفة كا كود باسم <code>ecma-262</code> واللي تقدروا تقروه من خلال اللينك ده: <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\">Ecma International: Ecma-262 Standard</a> وتقدروا تعرفوا الاضافات اللي هما شغالين عليها من هنا: <a href=\"https://tc39.es/\">TC39.es</a></p>\n<p>كل اضافة جديدة للغة بتعدي على مراحل:\n1. Stage-0 (Strawperson): دي بيكونوا لسه مبصوش في الاقتراح\n2. Stage-1 (Proposal): بدأوا يفكروا في الاضافة و بيتناقشوا مع الناس في ازاي ممكن نعمل الاضافة دي\n3. Stage-2 (Draft): هنا بيبدأوا تطوير الاضافة و بيكون من المتوقع انها تضاف للغة في وقت قصير\n4. Stage-3 (Candidate): وصلت مرحلة من التطوير اللي فيها نقدر نشتغل بيها بس محتاجه شوية تعديلات صغيرة و لازم قبل اي خطوه تانية يتم تجربة الاضافة دي و عمل اختبارات عليها\n5. Stage-4 (Finished): و هنا بتكون الاضافة خلصت و من المتوقع ان المتصفحات تبدأ في دعم الاضافة دي في اقرب وقت.</p>\n<p>طيب بعد ما عرفنا كل ده, نبدأ نعرف بقى ايه هو معامل التسلسل الاختياري.</p>\n<h2>Optional Chaining Operator | معامل التسلسل الاختياري (?.)</h2>\n<p>معامل التسلسل ده طريقة جديدة مقترحه هتسهل علينا مشكلة اننا نجيب قيمة من اعماق اوبجكت كبير زي اللي شوفناه فوق ده. الاقتراح ده حالياً في المرحلة التالتة (Stage-3) يعني من المتوقع انه هتنزل للمتصفحات في المستقبل. شكلة عامل ازاي؟ كده:</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">//بيعمل تشيك الاول على القيمة قبل ما ياخدها في كل مرحلة\nconst length = obj?.foo?.bar?.value?.length;\n</code></pre>\n</div>\n<p>طيب هو كده بيشتغل ازاي؟ بعد ما بتضيف علامة الاستفهام بعد اسم القيمة, محرك الجافاسكربت بيشوف هل القيمة اللي قبل العلامة موجوده ولا لا. لو موجوده هيخش على اللي بعدها, لو مش موجوده هيرجع <code>undefined</code> بدل ما يرجعلك ايرور <code>Uncaught TypeError: cannot read property # of undefined</code>. و بالتالي البرنامج هيفضل شغال عادي و بدل ال<code>if</code> الغريبه و المعقدة اللي شوفناها فوق دي, التحقق بتاعنا و الشرط هيبقى على حاجه واحدة بس:</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">//بيعمل تشيك الاول على القيمة قبل ما ياخدها في كل مرحلة\nconst length = obj?.foo?.bar?.value?.length;\nif(length !== undefined) //do something\n</code></pre>\n</div>\n<p>وبالتالي سهلنا على نفسنا معاناة كبيرة جداً.</p>\n<h2>ازاي تضيف معامل التسلسل الاختياري الى المشروع بتاعك</h2>\n<p>اولاً هتحتاج <a href=\"https://babeljs.io/\"><em>Babel</em></a> الغني عن التعريف و طبعاً <a href=\"https://www.npmjs.com/\"><em>NPM</em></a> او <a href=\"https://yarnpkg.com/\"><em>Yarn</em></a>.</p>\n<p>الاول هتحتاج تسطب <em>Babel</em>:</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">npm install --save-dev @babel/core @babel/cli\n\nاو\n\nyarn add -D @babel/core @babel/cli\n</code></pre>\n</div>\n<p>بعد كده هتحتاج تسطب المعامل نفسه:</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">npm install --save-dev @babel/plugin-proposal-optional-chaining\n\nاو\n\nyarn add -D @babel/plugin-proposal-optional-chaining\n</code></pre>\n</div>\n<p>بعد كده تقدر تظبط المشروع بتاعك انه يستخدم <em>Babel</em> عن طريق انك تعمل فايل اسمه <code>.babelrc</code> و تكتب جواه:</p>\n<div dir=\"ltr\" align=\"left\">\n<pre><code class=\"language-js\">{\n  \"plugins\": [\"@babel/plugin-proposal-optional-chaining\"]\n}\n</code></pre>\n</div>\n<p>طريق التسطيب المختلفة لـ <em>Babel</em> هتلاقوها هنا: <a href=\"https://babeljs.io/setup\">Babel Setup</a> و طرق تسطيب المعامل و معلومات اكتر عنه من هنا: <a href=\"https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining\">@babel/plugin-proposal-optional-chaining</a></p>","frontmatter":{"date":"August 31, 2019","path":"/blog/optional-chaining-operator-ar/","title":"ازاي و ليه تستخدم الـ Optional Chaining Operator","description":"النهاردة هنتعلم ازاي نستخدم الـ optional chaining operator عشان نتخلص من ايرورز الابوجكتس و الif الطويلة.","lang":"ar","imageCaption":null,"tags":["JavaScript","Babel","ESNext","Arabic"],"nofooter":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVQ4y61TSU/CQBidolStthTwf3vioiaauB0wMZF4wIsKCheNJ5ZSoQGKu0ECBA7Ac2ZoWIaW9ODhZWa+eXnzvmUIbIL/BBEDo/p0XYZZrqegKIbGGPxsC2cPUVeHI2ffK0vovkiAI9A1JR7jPC+H4mvD2njfNQP4yatoFjW0DJmD7VmM3TEO44pOyVy6bxQfFJ8E/Qp1Y+noVSIopFQU0yr6VoRC53f4orz3aQkWHVIx+zGIYmoNVlZGOSPDuFeQu91E7mYdz9cbyCQ05O8UmA8yKpRjPwXRKQXmRMkkTeqMiR3sRHG+p+PyMITkqYqrIw3JMw3ZhIL4fhTHsW0ei++GcRKLIH2xBXwTDGozKc/WkaUzrAudpw6ahSDapo5fQ6ONCvB0WYPabg7n2t9wH9iWsUoFw3QNoeM0hXNfhRr6GWZ2N6g6oqWVSQZu80iWfaNlP8L3YC8MuYd7X1/Pr6iXGMMf+tYawJIgcuUAAAAASUVORK5CYII=","aspectRatio":1.4071428571428573,"src":"/static/1b05f84c22742e3e817afd896e29455e/5134e/OptionalChainingOperator.png","srcSet":"/static/1b05f84c22742e3e817afd896e29455e/06f82/OptionalChainingOperator.png 197w,\n/static/1b05f84c22742e3e817afd896e29455e/da7d7/OptionalChainingOperator.png 393w,\n/static/1b05f84c22742e3e817afd896e29455e/5134e/OptionalChainingOperator.png 786w,\n/static/1b05f84c22742e3e817afd896e29455e/7a32a/OptionalChainingOperator.png 1179w,\n/static/1b05f84c22742e3e817afd896e29455e/3bf79/OptionalChainingOperator.png 1440w","srcWebp":"/static/1b05f84c22742e3e817afd896e29455e/922fd/OptionalChainingOperator.webp","srcSetWebp":"/static/1b05f84c22742e3e817afd896e29455e/51eab/OptionalChainingOperator.webp 197w,\n/static/1b05f84c22742e3e817afd896e29455e/9b775/OptionalChainingOperator.webp 393w,\n/static/1b05f84c22742e3e817afd896e29455e/922fd/OptionalChainingOperator.webp 786w,\n/static/1b05f84c22742e3e817afd896e29455e/a40b9/OptionalChainingOperator.webp 1179w,\n/static/1b05f84c22742e3e817afd896e29455e/ba24a/OptionalChainingOperator.webp 1440w","sizes":"(max-width: 786px) 100vw, 786px"}}}},"fields":{"readingTime":{"words":811,"minutes":4.055}}}},"pageContext":{}}}