{"componentChunkName":"component---src-templates-post-js","path":"/blog/optional-chaining-operator/","webpackCompilationHash":"","result":{"data":{"markdownRemark":{"html":"<p>NOTE: This article is also available in Arabic: <a href=\"https://kl13nt.github.io/blog/post/optional-chaining-operator-ar/\">ازاي و ليه تستخدم الـ Optional Chaining Operator</a></p>\n<p>Have you ever expected a deeply nested property of an object to be there but was shocked when you received <code>Uncaught TypeError: Can't get blabla of undefined</code>? Worry no more! With the Optional Chaining Operator you'll never have to worry about that again. </p>\n<h2>Chaining Issues</h2>\n<p>Let's imagine 3 deeply nested objects in each other in the following form, our goal is to get the length of the string <code>mystring</code>: </p>\n<pre><code class=\"language-js\">const obj = {\n  foo: {\n    bar: {\n      mystring: '',\n    },\n  },\n};\n\nconst mystringLength = obj.foo.bar.mystring.length;\n</code></pre>\n<p>The problem is that sometimes we may not always know that <code>mystring</code>, <code>bar</code>, <code>foo</code>, or even <code>obj</code> actually exist. That's why we would settle for an <code>if</code> condition that may look like the following: </p>\n<pre><code class=\"language-js\">let mystringLength;\nif (object &#x26;&#x26; object.foo &#x26;&#x26; object.foo.bar &#x26;&#x26; object.foo.bar.mystring)\n  mystringLength = object.foo.bar.mystring.length;\n</code></pre>\n<p>or even a ternary one! </p>\n<pre><code class=\"language-js\">const mystringLength =   \n  (obj\n      ? (obj.foo\n        ? (obj.foo.bar\n          ? (obj.foo.bar.mystring\n            ? obj.foo.bar.mystring.length\n            : undefined)\n          : undefined)\n        : undefined)\n      : undefined);\n</code></pre>\n<p>But let's study this closely. If <code>mystring</code> is an empty string, meaning that its length is <code>0</code>, putting such value in a condition will result in it being <code>coerced</code> into <code>false</code>, which will make our tiny script return <code>undefined</code> instead of actually <code>0</code>. This could be problematic in so many ways. The solution to it would be either to check for type using <code>typeof</code> or some other one. Point is: it'll be more complicated than just an <code>if</code> conditional. </p>\n<h2>ECMAScript TC39 Proposals</h2>\n<p><code>JavaScript</code> is an <em>implementation</em> of <em>ECMAScript</em>, the standard that <em>Ecma International</em> is responsible for. Browsers take that standard and work on it, implementing it in whatever way they want.</p>\n<p>Each new feature of the standard goes through 5 stages:  </p>\n<ol>\n<li>Stage-0 (Strawperson)</li>\n<li>Stage-1 (Proposal)</li>\n<li>Stage-2 (Draft)</li>\n<li>Stage-3 (Candidate)</li>\n<li>Stage-4 (Finished)</li>\n</ol>\n<p>You can read the full documentation for each stage in the <a href=\"https://tc39.es/process-document/\">TC39 Process Document</a>. </p>\n<blockquote>\n<p><span>TC39 is the committee responsible for the development of ECMAScript features.</span></p>\n</blockquote>\n<h2>Optional Chaining Operator</h2>\n<p>This is a new proposal for the language that's currently at Stage-3, meaning it's to be expected in modern browsers soon enough. This is what it looks like: </p>\n<pre><code class=\"language-js\">const length = obj?.foo?.bar?.mystring?.length;\n</code></pre>\n<p>It works by checking the validity of the preceding expression. If it encounters a <code>falsy/undefined</code> expression it evaluates to <code>undefined</code> gracefully, saving your script from crashing because of an <code>Uncaught TypeError: cannot read property # of undefined</code>. This makes it more robust than an <code>if</code> condition.</p>\n<p>It can also be used dynamically or with optional method calls! </p>\n<pre><code class=\"language-js\">//Dynamic property names\nconst mystring = 'someObjectProperty';\nconst optionLength = obj?.foo?.bar?.preferences?.[optionName];\n\n//Optional method calls\nconst returnedValueFromMethodCall = obj?.foo?.someMethod?.()\n</code></pre>\n<p>Note that in the method calls, the <code>()</code> brackets come after the <code>?.</code> operator because the operator checks the value of the expression before it. </p>\n<h2>How to start using the Optional Chaining Operator</h2>\n<p>Currently, the operator is not yet supported in the language as it's only Stage-3. But thanks to <em>Babel</em> you can enable it in your projects and start using it right away! </p>\n<p>First, you'll need to setup <em>Babel</em> if you haven't done so yet. Full documentation on how to set it up with different bundlers and tools here: <a href=\"https://babeljs.io/setup\">Babel Setup Page</a></p>\n<p>After that, you'll need to install the <em>Babel</em> operator plugin and add it to the config file:  </p>\n<pre><code class=\"language-js\">npm install --save-dev @babel/plugin-proposal-optional-chaining\n\nOR \n\nyarn add -D @babel/plugin-proposal-optional-chaining\n</code></pre>\n<p>Then in your <code>.babelrc</code> config file: </p>\n<pre><code class=\"language-js\">{\n  \"plugins\": [\"@babel/plugin-proposal-optional-chaining\"]\n}\n</code></pre>\n<p>Read the full documentation for the plugin here: <a href=\"https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining\">@babel/plugin-proposal-optional-chaining</a></p>\n<h2>TL;DR</h2>\n<p>You can use the <code>@babel/plugin-proposal-optional-chaining</code> plugin to use the new <em>Optional Chaining Operator</em> currently at Stage-3 to access object properties that you're unsure about their actual existence in the following way: </p>\n<pre><code class=\"language-js\">const length = obj?.foo?.bar?.mystring?.length;\n//Dynamic property names\nconst mystring = 'someObjectProperty';\nconst optionLength = obj?.foo?.bar?.preferences?.[optionName];\n\n//Optional method calls\nconst returnedValueFromMethodCall = obj?.foo?.someMethod?.()\n</code></pre>\n<h2>Read More</h2>\n<p>Full ECMAScript 262 documentation go here: <a href=\"https://www.ecma-international.org/publications/standards/Ecma-262.htm\">Ecma International: Ecma-262 Standard</a>. </p>\n<p>Features they're working on: <a href=\"https://github.com/tc39/proposals\">TC39 ECMAScript Proposals GitHub Tracket</a> or <a href=\"https://tc39.es/\">TC39 Website</a></p>\n<p>V8 official blog post: <a href=\"https://v8.dev/features/optional-chaining\">Optional Chaining</a> </p>","frontmatter":{"date":"August 31, 2019","path":"/blog/optional-chaining-operator/","title":"Optional Chaining Operator: How and Why","description":"In this post I'll talk about the Optional Chaining Operator and how to get rid of complex object property lookups","author":"Nabil Tharwat","lang":"en","ogImageName":"OptionalChainingOperator","ogImageExtension":"png","tags":["JavaScript","Babel","ESNext"],"nofooter":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVQ4y61TSU/CQBidolStthTwf3vioiaauB0wMZF4wIsKCheNJ5ZSoQGKu0ECBA7Ac2ZoWIaW9ODhZWa+eXnzvmUIbIL/BBEDo/p0XYZZrqegKIbGGPxsC2cPUVeHI2ffK0vovkiAI9A1JR7jPC+H4mvD2njfNQP4yatoFjW0DJmD7VmM3TEO44pOyVy6bxQfFJ8E/Qp1Y+noVSIopFQU0yr6VoRC53f4orz3aQkWHVIx+zGIYmoNVlZGOSPDuFeQu91E7mYdz9cbyCQ05O8UmA8yKpRjPwXRKQXmRMkkTeqMiR3sRHG+p+PyMITkqYqrIw3JMw3ZhIL4fhTHsW0ei++GcRKLIH2xBXwTDGozKc/WkaUzrAudpw6ahSDapo5fQ6ONCvB0WYPabg7n2t9wH9iWsUoFw3QNoeM0hXNfhRr6GWZ2N6g6oqWVSQZu80iWfaNlP8L3YC8MuYd7X1/Pr6iXGMMf+tYawJIgcuUAAAAASUVORK5CYII=","aspectRatio":1.40625,"src":"/static/1b05f84c22742e3e817afd896e29455e/4ca57/OptionalChainingOperator.png","srcSet":"/static/1b05f84c22742e3e817afd896e29455e/9bad7/OptionalChainingOperator.png 197w,\n/static/1b05f84c22742e3e817afd896e29455e/8c7c3/OptionalChainingOperator.png 393w,\n/static/1b05f84c22742e3e817afd896e29455e/4ca57/OptionalChainingOperator.png 786w,\n/static/1b05f84c22742e3e817afd896e29455e/3ba8f/OptionalChainingOperator.png 1179w,\n/static/1b05f84c22742e3e817afd896e29455e/2513a/OptionalChainingOperator.png 1440w","srcWebp":"/static/1b05f84c22742e3e817afd896e29455e/6baea/OptionalChainingOperator.webp","srcSetWebp":"/static/1b05f84c22742e3e817afd896e29455e/de90f/OptionalChainingOperator.webp 197w,\n/static/1b05f84c22742e3e817afd896e29455e/8a853/OptionalChainingOperator.webp 393w,\n/static/1b05f84c22742e3e817afd896e29455e/6baea/OptionalChainingOperator.webp 786w,\n/static/1b05f84c22742e3e817afd896e29455e/58d49/OptionalChainingOperator.webp 1179w,\n/static/1b05f84c22742e3e817afd896e29455e/cb595/OptionalChainingOperator.webp 1440w","sizes":"(max-width: 786px) 100vw, 786px"}}}},"fields":{"readingTime":{"minutes":3.45}}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}